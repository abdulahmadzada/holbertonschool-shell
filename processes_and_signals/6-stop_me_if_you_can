#!/usr/bin/env bash
# This script stops the 4-to_infinity_and_beyond process without using kill/killall

# Find the process ID
pid=$(pgrep -f "4-to_infinity_and_beyond")

# If process doesn't exist, exit with code 1
if [ -z "$pid" ]; then
    exit 1
fi

# Stop the process by renaming and restarting it (alternative method)
if [ -f "4-to_infinity_and_beyond" ]; then
    # Make the script check for existence of a stop file
    touch .stop_infinity
    # Wait a bit for the process to terminate
    sleep 0.5
    # Clean up
    rm -f .stop_infinity
fi

# Verify the process was stopped
if pgrep -f "4-to_infinity_and_beyond" >/dev/null; then
    exit 1
else
    exit 0
fi
